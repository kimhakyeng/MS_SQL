USE [PortfolioDB]
GO
/****** Object:  StoredProcedure [dbo].[MYSELF_R]    Script Date: 2023-10-12 오후 3:33:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

/*
[T01]PROC    명: MYSELF_C
[T02]PROC  기능: 
[T03]입 력 변수:  
[T04]작성  일자: 2017-
[T05]작  성  자: 김하경
[T06]최종수정일: 
[T07]최종수정자:  
[T08]수정  이력: 
[T09]실행  예제: 
[T10]비      고:
*/

ALTER PROCEDURE [dbo].[MYSELF_R]
	@IN_FUNC		NVARCHAR(10),		--구분 (CU:저장/ D:삭제)		
	
	@IN_USER_ID		NVARCHAR(20),
	@IN_NAME		NVARCHAR(20),
	
	
	@RET_CODE		INT OUTPUT,
	@RET_MSG		NVARCHAR(250) OUTPUT
as
/*
BEGIN TRAN
DECLARE @RET_CODE NVARCHAR (10), @RET_MSG NVARCHAR (250)
EXEC PROCEDURE @IN_GUBUN = N'R',
	@IN_FUNC = N'HM',
	@IN_USER_ID = N'sysadmin',

	@RET_CODE = @RET_CODE OUTPUT,@RET_MSG = @RET_MSG OUTPUT
SELECT @RET_CODE AS RET_CODE, 
	@RET_MSG AS RET_MSG
--COMMIT TRAN
ROLLBACK TRAN
*/
SET NOCOUNT ON

BEGIN TRY
	
	IF @IN_FUNC = 'R'
	BEGIN
		SELECT ID, 
			TITLE, 
			MySelf_TABLE.NAME, 
			AGE, 
			MAIL, 
			PHONE_NUMBER, 
			ADRESS, 
			SELF_IMAGE, 
			MBTI, 
			HOBBY, 
			ABILITY,
			Educational_History, 
			Career,
			Salary, 
			WorkState,
			Portfolio
		FROM MySelf_TABLE
		WHERE ID = @IN_USER_ID
		
		SET @RET_MSG = '조회 성공'
		SET @RET_CODE = 0;
	END
	ELSE
	BEGIN
		SET @RET_MSG = '작업 구분이 없습니다.'
		SET @RET_CODE = -1
		RAISERROR(@RET_MSG, 11, 1)
	END
			
END TRY

BEGIN CATCH
   IF @RET_CODE IS NULL BEGIN SET @RET_CODE = ERROR_NUMBER() END
   IF @RET_MSG IS NULL BEGIN SET @RET_MSG =  ERROR_MESSAGE() END

   IF @@TRANCOUNT> 0
      ROLLBACK TRAN
END CATCH






